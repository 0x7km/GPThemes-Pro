/* --------- SIDEBAR DESKTOP ---------*/
.flex-shrink-0.overflow-x-hidden,
.bg-gray-900[data-headlessui-state="open"] {
    --surface-primary: var(--c-surface-2) !important;
    color: var(--c-txt) !important;
    background-color: var(--c-bg-sidebar) !important;

    & nav a>* {
        color: var(--c-txt) !important;
    }
}

.scrollbar-trigger:has(nav[aria-label="Chat history"]) {

    // --------- SIDEBAR NAV ---------
    nav {

        &:has([aria-label="Chat history"]) {
            padding: var(--p-sidebar-nav) !important;
        }

        /* TODO dodati u vars.scss */
        .mt-5 {
            margin-top: 2.2rem !important;
        }

        a {
            color: var(--c-txt) !important;
            font-family: var(--f-fm) !important;
            padding: var(--p-sidebar-nav-a) !important;
            border-radius: var(--border-radius-nav-a) !important;

            transition: background-color .3s ease-in-out;
        }

        // New Chat link (first in nav in sidebar)
        a[href="/"] {
            border: 2px solid var(--c-surface-2);
            padding: var(--py-sidebar-nav-a-new-chat) !important;
            text-transform: uppercase;
        }

        // Border-radius for all elements that have .rounded-lg class in <nav> of sidebar. ALi on zezne border-radiusu i contextmenu u bottom sidebar jer u on ima ovu klasu. Zato sad dodajem <li>
        li .rounded-lg {
            border-radius: var(--border-radius-nav-a) !important;
        }

        // "Upgrade" link in nav bg
        a span.bg-black {
            border-color: transparent !important;

            // SVG icon in "Upgrade" link in nav
            &>svg>path {
                fill: var(--c-accent-light) !important;
            }
        }


        // TODO add better styling to this btn
        /* User profile button in sidebar bottom */
        button[id^="headlessui-menu-button-"] {
            border-radius: var(--border-radius-nav-a);
            margin-top: 1rem;

            /* Username div */
            .font-semibold {
                color: var(--c-txt);
            }
        }

    }


    // --------- SIDEBAR ACTIVE LINK AND HOVER STATE ---------
    // --------- SIDEBAR LINK ... BTN BG-GRADIENT ---------
    .bg-gradient-to-l,
    li .bg-token-surface-primary {
        --surface-primary: var(--c-surface-2) !important;
        --tw-gradient-from: var(--surface-primary) var(--tw-gradient-from-position) !important;
        color: var(--c-accent) !important;
    }

    /* za manji window size ovo dole ne radi, ali ne za veci. A ne radi jer ovo valjda ima vecu prenost:
        .flex-shrink-0.overflow-x-hidden nav a > *, .bg-gray-900[data-headlessui-state="open"] nav a > * {
            color: var(--c-txt) !important;
        } 
    */
    /* li a.bg-token-surface-primary {
        color: var(--c-accent) !important;
    } */

    li .bg-token-surface-tertiary {
        padding: var(--p-sidebar-nav-a) !important;
        color: var(--c-txt) !important;
        background-color: var(--c-surface-3) !important;
        // border-radius: var(--border-radius-nav-a) !important;
        left: 0 !important;
        right: 0 !important;
        // overflow: hidden !important;
    }

    // --------- SIDEBAR LINK ... BTN BG-GRADIENT ---------
    li .bg-gradient-to-l {
        opacity: 0 !important;
    }

    li:has(a.bg-token-surface-primary) .bg-gradient-to-l {
        opacity: 1 !important;
    }


    // --------- SIDEBAR TIME HEADING ---------
    // nav div is for targeting smaller devices, div[data-projection-id] is for desktop
    nav div,
    div[data-projection-id] {

        // Parent of time heading in sidebar
        &:has(>h3) {
            // border: 1px solid red !important;
            margin-bottom: .3rem;
        }

        h3 {
            display: inline-block !important;
            color: var(--c-accent) !important;
            // background-color: transparent !important;
            background-color: hsl(var(--accent-hsl) / 0.2) !important;
            border-radius: 100vw;
            text-transform: uppercase;
            font-weight: bold;
            padding: .5rem 1rem !important;
            height: auto !important;
            // padding-inline: 1rem !important;
            line-height: 1 !important;
        }
    }



}